<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Qu·ª≥nh Anh ƒë·∫≠p H·∫£i Vi·ªát</title>
<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto;
  background: radial-gradient(1200px 700px at 30% 10%, #ffb6c1, #ff69b4);
  color:#fff;
}
.container{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  padding:14px;
}
h1{
  text-align:center;
  margin:6px 0 8px;
  font-size:22px;
}
.score, .timer{
  text-align:center;
  font-size:15px;
  margin-bottom:6px;
}

/* TIME SELECT */
.time-select{
  text-align:center;
  margin-bottom:8px;
}
select{
  padding:6px 10px;
  border-radius:10px;
  border:none;
  font-size:14px;
}

/* GAME */
.board{
  flex:1;
  position:relative;
  border-radius:24px;
  background: rgba(255,255,255,.15);
  border:1px solid rgba(255,255,255,.3);
  overflow:hidden;
}
.dog{
  position:absolute;
  width:220px;
  height:220px;
  border-radius:30px;
  background: rgba(255,255,255,.25);
  border:1px solid rgba(255,255,255,.4);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  transform:translate(-50%,-50%);
  touch-action:manipulation;
}
.dog.hit{
  animation: hit .15s;
}
@keyframes hit{
  0%{transform:translate(-50%,-50%) scale(1)}
  50%{transform:translate(-50%,-50%) scale(.9)}
  100%{transform:translate(-50%,-50%) scale(1)}
}
.emoji{font-size:90px}

/* BUBBLE */
.bubble{
  position:absolute;
  top:-12px;
  left:50%;
  transform:translate(-50%,-100%);
  background:rgba(0,0,0,.7);
  padding:10px 14px;
  border-radius:18px;
  font-size:14px;
  opacity:0;
  transition:.25s;
  white-space:nowrap;
}
.bubble.show{opacity:1}

/* POPUP */
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}
.popup.show{display:flex}
.popup-box{
  background:#ff69b4;
  padding:22px;
  border-radius:20px;
  text-align:center;
  font-weight:700;
  max-width:90%;
}

/* CONTROLS */
.controls{
  display:flex;
  gap:8px;
  margin-top:10px;
}
button{
  flex:1;
  padding:10px;
  border-radius:14px;
  border:none;
  background:#ff4fa3;
  color:#fff;
  font-size:14px;
}
button:active{transform:scale(.97)}
</style>
</head>

<body>
<div class="container">
  <h1>üê∂ Qu·ª≥nh Anh ƒë·∫≠p H·∫£i Vi·ªát</h1>

  <div class="time-select">
    B·∫°n mu·ªën ƒë·∫≠p H·∫£i Vi·ªát trong bao l√¢u? H√£y l·ª±a ch·ªçn:
    <br>
    <select id="timeSelect">
      <option value="">M·∫∑c ƒë·ªãnh: 1 ph√∫t</option>
      <script>
        for(let i=1;i<=60;i++){
          document.write(`<option value="${i}">${i} ph√∫t</option>`);
        }
      </script>
    </select>
  </div>

  <div class="timer" id="timer">Th·ªùi gian c√≤n l·∫°i: 60s</div>
  <div class="score" id="score">S·ªë l·∫ßn H·∫£i Vi·ªát b·ªã Qu·ª≥nh Anh ƒë·∫≠p: 0</div>

  <div class="board" id="board">
    <div class="dog" id="dog">
      <div class="bubble" id="bubble"></div>
      <div class="emoji">üê∂</div>
    </div>
  </div>

  <div class="controls">
    <button onclick="start()">‚ñ∂ Start</button>
    <button onclick="feed()">üçΩ Cho H·∫£i Vi·ªát ƒÉn</button>
    <button onclick="resetGame()">üîÑ Reset</button>
  </div>
</div>

<div class="popup" id="popup">
  <div class="popup-box" id="popupText"></div>
</div>

<script>
const dog = document.getElementById("dog");
const bubble = document.getElementById("bubble");
const scoreEl = document.getElementById("score");
const timerEl = document.getElementById("timer");
const timeSelect = document.getElementById("timeSelect");
const popup = document.getElementById("popup");
const popupText = document.getElementById("popupText");

let hits=0, running=false, timeLeft=60, timerId=null;

/* SOUND */
const audioCtx = new (window.AudioContext||window.webkitAudioContext)();
function playHitSound(){
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type="square";
  osc.frequency.value=180;
  gain.gain.value=0.2;
  osc.connect(gain).connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime+0.05);
}

function moveDog(){
  const b=document.getElementById("board").getBoundingClientRect();
  dog.style.left=Math.random()*(b.width-240)+120+"px";
  dog.style.top=Math.random()*(b.height-240)+120+"px";
}

function showBubble(t){
  bubble.textContent=t;
  bubble.classList.add("show");
  setTimeout(()=>bubble.classList.remove("show"),1500);
}

function dogSpeak(){
  if(hits%10===0) showBubble("Th√¥i ƒë·ª´ng ƒë·∫≠p tui n·ªØa, ƒëau th·∫≠t ƒë√≥ üò≠");
  else if(hits%5===0) showBubble("B·∫°n b·ªè qua cho t√¥i nha :<");
  else if(hits%3===0) showBubble("B·∫°n gh√©t t√¥i l·∫Øm h·∫£ :<<");
}

function showPopup(text){
  popupText.textContent=text;
  popup.classList.add("show");
  setTimeout(()=>popup.classList.remove("show"),2500);
}

function hit(){
  if(!running) return;
  hits++;
  scoreEl.textContent=`S·ªë l·∫ßn H·∫£i Vi·ªát b·ªã Qu·ª≥nh Anh ƒë·∫≠p: ${hits}`;
  dog.classList.remove("hit"); void dog.offsetWidth; dog.classList.add("hit");
  playHitSound();
  dogSpeak();
  if(hits%36===0){
    showPopup("üéâ CH√öC M·ª™NG B·∫†N ƒê√É ƒê·∫¨P H·∫¢I VI·ªÜT 36 L·∫¶N, T·∫∂NG B·∫†N 1 B√ì RAU M√Å ü•¨");
  }
  moveDog();
}

dog.addEventListener("touchstart",e=>{e.preventDefault();hit();});
dog.addEventListener("click",hit);

function start(){
  if(running) return;
  running=true;
  hits=0;
  scoreEl.textContent="S·ªë l·∫ßn H·∫£i Vi·ªát b·ªã Qu·ª≥nh Anh ƒë·∫≠p: 0";
  timeLeft=(+timeSelect.value||1)*60;
  timerEl.textContent=`Th·ªùi gian c√≤n l·∫°i: ${timeLeft}s`;
  timerId=setInterval(()=>{
    timeLeft--;
    timerEl.textContent=`Th·ªùi gian c√≤n l·∫°i: ${timeLeft}s`;
    if(timeLeft<=0){
      clearInterval(timerId);
      running=false;
      showPopup(`üéâ Ch√∫c m·ª´ng b·∫°n ƒë√£ ƒë·∫≠p H·∫£i Vi·ªát ƒë∆∞·ª£c ${hits} l·∫ßn`);
    }
  },1000);
  moveDog();
}

function resetGame(){
  running=false;
  clearInterval(timerId);
  hits=0;
  timeLeft=60;
  scoreEl.textContent="S·ªë l·∫ßn H·∫£i Vi·ªát b·ªã Qu·ª≥nh Anh ƒë·∫≠p: 0";
  timerEl.textContent="Th·ªùi gian c√≤n l·∫°i: 60s";
  bubble.classList.remove("show");
}

function feed(){
  showBubble("C√ÅM ∆†N B·∫†N NHA, IU B·∫†N L·∫ÆM ü•∞");
}
moveDog();
</script>
</body>
</html>
  
